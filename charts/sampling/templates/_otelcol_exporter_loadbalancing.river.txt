{{- define "deployment.exporter.loadbalancing" -}}
otelcol.exporter.loadbalancing "default" {
  // https://grafana.com/docs/agent/latest/flow/reference/components/otelcol.exporter.loadbalancing/
  resolver {
    dns {
      hostname = "{{ .Release.Name }}-grafana-agent-statefulset.{{ .Release.Namespace }}.svc.cluster.local."
    }
  }

  protocol {
    otlp {
      client {
        tls {
          insecure = true
        }
      }
    }
  }
}

{{ end }}
